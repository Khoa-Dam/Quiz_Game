<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”Œ Socket.IO Browser Test</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
</head>
<body>
    <h1>ðŸ”Œ Socket.IO Browser Test</h1>
    <p>Má»Ÿ Developer Tools (F12) â†’ Console Ä‘á»ƒ test</p>
    
    <script>
        // Connect to Socket.IO server
        const socket = io('http://localhost:3000');
        
        // Connection events
        socket.on('connect', () => {
            console.log('âœ… Connected to server');
            console.log('Socket ID:', socket.id);
        });
        
        socket.on('disconnect', () => {
            console.log('âŒ Disconnected from server');
        });
        
        // Authentication events
        socket.on('authenticated', (data) => {
            console.log('âœ… Authenticated:', data);
        });
        
        socket.on('auth_error', (data) => {
            console.log('âŒ Auth error:', data);
        });
        
        // Room events
        socket.on('room_joined', (data) => {
            console.log('âœ… Room joined:', data);
        });
        
        socket.on('room_created', (data) => {
            console.log('ðŸ  Room created:', data);
        });
        
        socket.on('player_joined', (data) => {
            console.log('ðŸ‘¥ Player joined:', data.player.name);
        });
        
        // Game events
        socket.on('game_started', (data) => {
            console.log('ðŸŽ® Game started:', data);
        });
        
        socket.on('new_question', (data) => {
            console.log('â“ New question:', data);
        });
        
        socket.on('answer_submitted', (data) => {
            console.log('ðŸ“ Answer submitted:', data);
        });
        
        socket.on('error', (data) => {
            console.log('âŒ Error:', data);
        });
        
        // Test functions (run in console)
        window.testSocket = {
            // Authenticate
            authenticate: (token) => {
                socket.emit('authenticate', { token });
                console.log('ðŸ” Authenticating with token:', token.substring(0, 20) + '...');
            },
            
            // Join room
            joinRoom: (roomCode) => {
                socket.emit('join_room', { roomCode });
                console.log('ðŸšª Joining room:', roomCode);
            },
            
            // Create room
            createRoom: (quizId) => {
                socket.emit('create_room', { 
                    quizId,
                    settings: { maxPlayers: 10, timePerQuestion: 30 }
                });
                console.log('ðŸ  Creating room with quiz:', quizId);
            },
            
            // Submit answer
            submitAnswer: (roomId, questionIndex, selectedAnswer, responseTime) => {
                socket.emit('submit_answer', {
                    roomId, questionIndex, selectedAnswer, responseTime
                });
                console.log('ðŸ“ Submitting answer:', selectedAnswer);
            },
            
            // Start game
            startGame: (roomId) => {
                socket.emit('start_game', { roomId });
                console.log('ðŸŽ® Starting game:', roomId);
            },
            
            // Disconnect
            disconnect: () => {
                socket.disconnect();
                console.log('ðŸ”Œ Disconnected');
            },
            
            // Get status
            getStatus: () => {
                return {
                    connected: socket.connected,
                    id: socket.id
                };
            }
        };
        
        console.log('ðŸš€ Socket.IO test ready!');
        console.log('Sá»­ dá»¥ng testSocket.authenticate(token) Ä‘á»ƒ test');
        console.log('VÃ­ dá»¥: testSocket.authenticate("your_jwt_token")');
    </script>
</body>
</html> 